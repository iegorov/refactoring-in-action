<section data-markdown>
  <textarea data-template>
    ## Улучшение
    ```js
      $scope.ok = () => {
        $scope.loading = true;
        $scope.data.problemUuid = problemUuid;
        $scope.data.address = $scope.data.address.name ? $scope.data.address.name : $scope.data.address;

        const negativeSolutionRequestDto = createNegativeSolutionRequestDto();

        problemDetailService
            .saveNegativeSolution(negativeSolutionRequestDto)
        //...
      }

      /**
       * Создает параметры для запроса переноса сроков заявки или доставки.
       */
      function createNegativeSolutionRequestDto() {
        const { data, selectedPVZ, priorApprovalDto } = $scope;
        const priorApproval = { ...priorApprovalDto, ...data.priorApprovalDto };
        const selectedMassAgreementPreviews = $scope.massAgreementPreviewsGridOptions.api.getSelectedRows();

        return new window.DTO.NegativeSolutionRequestDto({
          data,
          selectedPVZ,
          priorApproval,
          selectedMassAgreementPreviews,
        });
      }
    ```
  </textarea>
</section>
