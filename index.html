<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Refactoring in action</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/theme/white.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/highlight/monokai.min.css"
    />
    <style>
      .align-left {
        text-align: left;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <h1>Рефакторинг на практике</h1>
          <p>Примеры рефакторинга реальных приложений.</p>
        </section>

        <!-- Modules -->
        <section
          data-include="slides/01-modules/1-slide-modules.html"
        ></section>
        <section
          data-include="slides/01-modules/2-slide-modules.html"
        ></section>
        <section
          data-include="slides/01-modules/3-slide-modules.html"
        ></section>

        <!-- Low Coupling & High Cohesion -->
        <section
          data-include="slides/02-low-coupling-high-cohesion/1-slide-low-coupling-high-cohesion.html"
        ></section>
        <section
          data-include="slides/02-low-coupling-high-cohesion/2-slide-low-coupling-high-cohesion.html"
        ></section>

        <!-- DTO -->
        <section data-include="slides/03-dto/1-slide-dto.html"></section>
        <section data-include="slides/03-dto/2-slide-dto.html"></section>
        <section data-include="slides/03-dto/3-slide-dto.html"></section>
        <section data-include="slides/03-dto/4-slide-dto.html"></section>

        <!-- Single Responsibility Principle (SOLID) -->
        <section
          data-include="slides/04-single-responsibility/1-single-responsibility.html"
        ></section>
        <section
          data-include="slides/04-single-responsibility/2-single-responsibility.html"
        ></section>
        <section
          data-include="slides/04-single-responsibility/3-single-responsibility.html"
        ></section>

        <!-- DRY -->
        <section data-include="slides/05-dry/1-dry.html"></section>
        <section data-include="slides/05-dry/2-dry.html"></section>
        <section data-include="slides/05-dry/3-dry.html"></section>
        <section data-include="slides/05-dry/4-dry.html"></section>
        <section data-include="slides/05-dry/5-dry.html"></section>

        <!-- Guard expression -->
        <section
          data-include="slides/06-guard-expression/1-slide-guard-expression.html"
        ></section>
        <section
          data-include="slides/06-guard-expression/2-slide-guard-expression.html"
        ></section>
        <section
          data-include="slides/06-guard-expression/3-slide-guard-expression.html"
        ></section>

        <!-- Circular dependency -->
        <section
          data-include="slides/07-circular-dependency/1-circular-dependency.html"
        ></section>
        <section
          data-include="slides/07-circular-dependency/2-circular-dependency.html"
        ></section>
        <section
          data-include="slides/07-circular-dependency/3-circular-dependency.html"
        ></section>
      </div>
    </div>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/reveal.min.js"
    ></script>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/highlight/highlight.min.js"
    ></script>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.1.0/plugin/markdown/markdown.min.js"
      integrity="sha512-4exkEeyVuaWUFKozXl6L3UCugl6ai1cKnrVFkWUstdrNB2sDxxmPEaHBzTlYm9wX78EjPzEBG0s8k37oPeUFIw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Собираем все секции с атрибутом data-include
        const sections = document.querySelectorAll('section[data-include]');

        // Получаем массив URL из атрибутов data-include
        const urls = Array.from(sections).map((section) =>
          section.getAttribute('data-include'),
        );

        // Запрашиваем все файлы параллельно
        Promise.all(
          urls.map((url) => fetch(url).then((response) => response.text())),
        ).then((htmlContents) => {
          // Вставляем содержимое в соответствующие секции
          sections.forEach((section, index) => {
            section.innerHTML = htmlContents[index];
          });
          // Синхронизируем Reveal.js
          Reveal.initialize({
            plugins: [RevealMarkdown, RevealHighlight],
          });
        });
      });
    </script>
  </body>
</html>
